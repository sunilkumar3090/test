{"ast":null,"code":"import { CommonModule } from '@angular/common';\nimport { MatTableDataSource, MatTableModule } from '@angular/material/table';\nimport { MatPaginator, MatPaginatorModule } from '@angular/material/paginator';\nimport { MatSort, MatSortModule } from '@angular/material/sort';\nimport { MatProgressBarModule } from '@angular/material/progress-bar';\nimport { MatFormFieldModule } from '@angular/material/form-field';\nimport { MatIconModule } from '@angular/material/icon';\nimport { FormsModule } from '@angular/forms';\nimport { MatInputModule } from '@angular/material/input';\nimport { select } from '@ngrx/store';\nimport { loadUsersSuccess } from '@app/_state/users/users.actions';\nimport { getUserState } from '@app/_state/users/users.reducer';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@app/_shared/user.service\";\nimport * as i2 from \"@ngrx/store\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/material/table\";\nimport * as i5 from \"@angular/material/sort\";\nimport * as i6 from \"@angular/material/progress-bar\";\nimport * as i7 from \"@angular/material/form-field\";\nimport * as i8 from \"@angular/material/input\";\nimport * as i9 from \"@angular/material/icon\";\nimport * as i10 from \"@angular/forms\";\nfunction UsersComponent_mat_progress_bar_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"mat-progress-bar\", 17);\n  }\n}\nfunction UsersComponent_mat_progress_bar_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"mat-progress-bar\", 17);\n  }\n}\nfunction UsersComponent_th_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 18);\n    i0.ɵɵtext(1, \"ID\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction UsersComponent_td_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 19);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const user_r16 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(user_r16.id);\n  }\n}\nfunction UsersComponent_th_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 18);\n    i0.ɵɵtext(1, \"First Name\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction UsersComponent_td_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 19);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const user_r17 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(user_r17.firstName);\n  }\n}\nfunction UsersComponent_th_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 18);\n    i0.ɵɵtext(1, \"Last Name\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction UsersComponent_td_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 19);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const user_r18 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(user_r18.lastName);\n  }\n}\nfunction UsersComponent_th_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 18);\n    i0.ɵɵtext(1, \"Email\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction UsersComponent_td_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 19);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const user_r19 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(user_r19.email);\n  }\n}\nfunction UsersComponent_th_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"th\", 20);\n  }\n}\nfunction UsersComponent_td_20_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r22 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"td\", 19)(1, \"button\", 21);\n    i0.ɵɵlistener(\"click\", function UsersComponent_td_20_Template_button_click_1_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r22);\n      const user_r20 = restoredCtx.$implicit;\n      const ctx_r21 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r21.toggleEdit(user_r20));\n    });\n    i0.ɵɵelementStart(2, \"mat-icon\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const user_r20 = ctx.$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(user_r20.editing ? \"done\" : \"edit\");\n  }\n}\nfunction UsersComponent_td_22_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r27 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 23)(1, \"div\", 24)(2, \"mat-form-field\")(3, \"input\", 25);\n    i0.ɵɵlistener(\"ngModelChange\", function UsersComponent_td_22_div_1_Template_input_ngModelChange_3_listener($event) {\n      i0.ɵɵrestoreView(_r27);\n      const user_r23 = i0.ɵɵnextContext().$implicit;\n      return i0.ɵɵresetView(user_r23.firstName = $event);\n    });\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(4, \"div\", 24)(5, \"mat-form-field\")(6, \"input\", 26);\n    i0.ɵɵlistener(\"ngModelChange\", function UsersComponent_td_22_div_1_Template_input_ngModelChange_6_listener($event) {\n      i0.ɵɵrestoreView(_r27);\n      const user_r23 = i0.ɵɵnextContext().$implicit;\n      return i0.ɵɵresetView(user_r23.lastName = $event);\n    });\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(7, \"div\", 24)(8, \"mat-form-field\")(9, \"input\", 27);\n    i0.ɵɵlistener(\"ngModelChange\", function UsersComponent_td_22_div_1_Template_input_ngModelChange_9_listener($event) {\n      i0.ɵɵrestoreView(_r27);\n      const user_r23 = i0.ɵɵnextContext().$implicit;\n      return i0.ɵɵresetView(user_r23.email = $event);\n    });\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(10, \"div\", 28)(11, \"button\", 29);\n    i0.ɵɵlistener(\"click\", function UsersComponent_td_22_div_1_Template_button_click_11_listener() {\n      i0.ɵɵrestoreView(_r27);\n      const user_r23 = i0.ɵɵnextContext().$implicit;\n      const ctx_r32 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r32.save(user_r23));\n    });\n    i0.ɵɵtext(12, \"Save\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"button\", 30);\n    i0.ɵɵlistener(\"click\", function UsersComponent_td_22_div_1_Template_button_click_13_listener() {\n      i0.ɵɵrestoreView(_r27);\n      const user_r23 = i0.ɵɵnextContext().$implicit;\n      const ctx_r34 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r34.cancel(user_r23));\n    });\n    i0.ɵɵtext(14, \"Cancel\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const user_r23 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngModel\", user_r23.firstName);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngModel\", user_r23.lastName);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngModel\", user_r23.email);\n  }\n}\nfunction UsersComponent_td_22_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\");\n    i0.ɵɵtemplate(1, UsersComponent_td_22_div_1_Template, 15, 3, \"div\", 22);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const user_r23 = ctx.$implicit;\n    const ctx_r12 = i0.ɵɵnextContext();\n    i0.ɵɵattribute(\"colspan\", ctx_r12.displayedColumns.length);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r12.expandedElement === user_r23);\n  }\n}\nfunction UsersComponent_tr_23_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"tr\", 31);\n  }\n}\nfunction UsersComponent_tr_24_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r39 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\", 32);\n    i0.ɵɵlistener(\"click\", function UsersComponent_tr_24_Template_tr_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r39);\n      const user_r37 = restoredCtx.$implicit;\n      const ctx_r38 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r38.expandedElement = ctx_r38.expandedElement === user_r37 ? null : user_r37);\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const user_r37 = ctx.$implicit;\n    const ctx_r14 = i0.ɵɵnextContext();\n    i0.ɵɵclassProp(\"expanded-row\", ctx_r14.expandedElement === user_r37);\n  }\n}\nfunction UsersComponent_tr_25_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"tr\", 33);\n  }\n}\nconst _c0 = function () {\n  return [\"expandedDetail\"];\n};\nexport class UsersComponent {\n  constructor(userService, store) {\n    this.userService = userService;\n    this.store = store;\n    this.displayedColumns = ['id', 'firstName', 'lastName', 'email', 'actions'];\n    this.isLoading = true;\n    this.users$ = this.store.pipe(select(getUserState));\n  }\n  ngOnInit() {\n    this.loadUsers();\n  }\n  loadUsers() {\n    this.isLoading = true;\n    this.userService.getUsers().subscribe(users => {\n      if (users.users.length) {\n        this.store.dispatch(loadUsersSuccess({\n          users: users.users\n        }));\n        this.dataSource = new MatTableDataSource(users.users);\n        console.log(users.users, 'fetch users');\n        this.dataSource.paginator = this.paginator;\n        this.dataSource.sort = this.sort;\n        this.isLoading = false;\n      }\n    }, error => {\n      console.error(error);\n      this.isLoading = false;\n    });\n  }\n  applyFilter(event) {\n    const filterValue = event.target.value;\n    this.dataSource.filter = filterValue.trim().toLowerCase();\n  }\n  toggleEdit(user) {\n    user.editing = !user.editing;\n    if (user.editing) {\n      // Make a copy of the user to allow canceling changes\n      user.editingUser = Object.assign({}, user);\n    }\n  }\n  save(user) {\n    // Simulate saving changes to a data source\n    const uservalue = user;\n    this.expandedElement = null;\n    this.toggleEdit(user);\n    this.updateUsers(user.id, user);\n  }\n  cancel(user) {\n    this.expandedElement = null;\n    Object.assign(user, user.editingUser);\n    this.toggleEdit(user);\n  }\n  updateUsers(id, data) {\n    this.userService.updateUsers(id, data).subscribe(data => {\n      console.log(data, 'updated');\n    }, error => {\n      console.error(error);\n      this.isLoading = false;\n    });\n  }\n}\nUsersComponent.ɵfac = function UsersComponent_Factory(t) {\n  return new (t || UsersComponent)(i0.ɵɵdirectiveInject(i1.UserService), i0.ɵɵdirectiveInject(i2.Store));\n};\nUsersComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: UsersComponent,\n  selectors: [[\"app-users\"]],\n  viewQuery: function UsersComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(MatPaginator, 5);\n      i0.ɵɵviewQuery(MatSort, 5);\n    }\n    if (rf & 2) {\n      let _t;\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.paginator = _t.first);\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.sort = _t.first);\n    }\n  },\n  standalone: true,\n  features: [i0.ɵɵStandaloneFeature],\n  decls: 26,\n  vars: 7,\n  consts: [[\"mode\", \"indeterminate\", 4, \"ngIf\"], [1, \"table-container\", \"mat-elevation-z8\"], [\"matInput\", \"\", \"placeholder\", \"Filter\", 3, \"keyup\"], [\"mat-table\", \"\", \"matSort\", \"\", \"multiTemplateDataRows\", \"\", 3, \"dataSource\"], [\"matColumnDef\", \"id\"], [\"mat-header-cell\", \"\", \"mat-sort-header\", \"\", 4, \"matHeaderCellDef\"], [\"mat-cell\", \"\", 4, \"matCellDef\"], [\"matColumnDef\", \"firstName\"], [\"matColumnDef\", \"lastName\"], [\"matColumnDef\", \"email\"], [\"matColumnDef\", \"actions\"], [\"mat-header-cell\", \"\", 4, \"matHeaderCellDef\"], [\"matColumnDef\", \"expandedDetail\"], [4, \"matCellDef\"], [\"mat-header-row\", \"\", 4, \"matHeaderRowDef\"], [\"mat-row\", \"\", 3, \"expanded-row\", \"click\", 4, \"matRowDef\", \"matRowDefColumns\"], [\"mat-row\", \"\", \"class\", \"expanded-row-detail\", 4, \"matRowDef\", \"matRowDefColumns\"], [\"mode\", \"indeterminate\"], [\"mat-header-cell\", \"\", \"mat-sort-header\", \"\"], [\"mat-cell\", \"\"], [\"mat-header-cell\", \"\"], [\"mat-icon-button\", \"\", 3, \"click\"], [\"class\", \"expanded-row-content\", 4, \"ngIf\"], [1, \"expanded-row-content\"], [1, \"input-field\"], [\"matInput\", \"\", \"placeholder\", \"First Name\", 3, \"ngModel\", \"ngModelChange\"], [\"matInput\", \"\", \"placeholder\", \"Last Name\", 3, \"ngModel\", \"ngModelChange\"], [\"matInput\", \"\", \"placeholder\", \"Email\", 3, \"ngModel\", \"ngModelChange\"], [1, \"actions\"], [\"mat-button\", \"\", \"color\", \"primary\", 3, \"click\"], [\"mat-button\", \"\", \"color\", \"warn\", 3, \"click\"], [\"mat-header-row\", \"\"], [\"mat-row\", \"\", 3, \"click\"], [\"mat-row\", \"\", 1, \"expanded-row-detail\"]],\n  template: function UsersComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtemplate(0, UsersComponent_mat_progress_bar_0_Template, 1, 0, \"mat-progress-bar\", 0);\n      i0.ɵɵelementStart(1, \"div\", 1)(2, \"mat-form-field\")(3, \"input\", 2);\n      i0.ɵɵlistener(\"keyup\", function UsersComponent_Template_input_keyup_3_listener($event) {\n        return ctx.applyFilter($event);\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵtemplate(4, UsersComponent_mat_progress_bar_4_Template, 1, 0, \"mat-progress-bar\", 0);\n      i0.ɵɵelementStart(5, \"mat-table\", 3);\n      i0.ɵɵelementContainerStart(6, 4);\n      i0.ɵɵtemplate(7, UsersComponent_th_7_Template, 2, 0, \"th\", 5);\n      i0.ɵɵtemplate(8, UsersComponent_td_8_Template, 2, 1, \"td\", 6);\n      i0.ɵɵelementContainerEnd();\n      i0.ɵɵelementContainerStart(9, 7);\n      i0.ɵɵtemplate(10, UsersComponent_th_10_Template, 2, 0, \"th\", 5);\n      i0.ɵɵtemplate(11, UsersComponent_td_11_Template, 2, 1, \"td\", 6);\n      i0.ɵɵelementContainerEnd();\n      i0.ɵɵelementContainerStart(12, 8);\n      i0.ɵɵtemplate(13, UsersComponent_th_13_Template, 2, 0, \"th\", 5);\n      i0.ɵɵtemplate(14, UsersComponent_td_14_Template, 2, 1, \"td\", 6);\n      i0.ɵɵelementContainerEnd();\n      i0.ɵɵelementContainerStart(15, 9);\n      i0.ɵɵtemplate(16, UsersComponent_th_16_Template, 2, 0, \"th\", 5);\n      i0.ɵɵtemplate(17, UsersComponent_td_17_Template, 2, 1, \"td\", 6);\n      i0.ɵɵelementContainerEnd();\n      i0.ɵɵelementContainerStart(18, 10);\n      i0.ɵɵtemplate(19, UsersComponent_th_19_Template, 1, 0, \"th\", 11);\n      i0.ɵɵtemplate(20, UsersComponent_td_20_Template, 4, 1, \"td\", 6);\n      i0.ɵɵelementContainerEnd();\n      i0.ɵɵelementContainerStart(21, 12);\n      i0.ɵɵtemplate(22, UsersComponent_td_22_Template, 2, 2, \"td\", 13);\n      i0.ɵɵelementContainerEnd();\n      i0.ɵɵtemplate(23, UsersComponent_tr_23_Template, 1, 0, \"tr\", 14);\n      i0.ɵɵtemplate(24, UsersComponent_tr_24_Template, 1, 2, \"tr\", 15);\n      i0.ɵɵtemplate(25, UsersComponent_tr_25_Template, 1, 0, \"tr\", 16);\n      i0.ɵɵelementEnd()();\n    }\n    if (rf & 2) {\n      i0.ɵɵproperty(\"ngIf\", ctx.isLoading);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngIf\", ctx.isLoading);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"dataSource\", ctx.dataSource);\n      i0.ɵɵadvance(18);\n      i0.ɵɵproperty(\"matHeaderRowDef\", ctx.displayedColumns);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"matRowDefColumns\", ctx.displayedColumns);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"matRowDefColumns\", i0.ɵɵpureFunction0(6, _c0));\n    }\n  },\n  dependencies: [CommonModule, i3.NgIf, MatTableModule, i4.MatTable, i4.MatHeaderCellDef, i4.MatHeaderRowDef, i4.MatColumnDef, i4.MatCellDef, i4.MatRowDef, i4.MatHeaderCell, i4.MatCell, i4.MatHeaderRow, i4.MatRow, MatPaginatorModule, MatSortModule, i5.MatSort, i5.MatSortHeader, MatProgressBarModule, i6.MatProgressBar, MatFormFieldModule, i7.MatFormField, MatInputModule, i8.MatInput, MatIconModule, i9.MatIcon, FormsModule, i10.DefaultValueAccessor, i10.NgControlStatus, i10.NgModel],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["CommonModule","MatTableDataSource","MatTableModule","MatPaginator","MatPaginatorModule","MatSort","MatSortModule","MatProgressBarModule","MatFormFieldModule","MatIconModule","FormsModule","MatInputModule","select","loadUsersSuccess","getUserState","i0","UsersComponent","constructor","userService","store","users$","pipe","ngOnInit","loadUsers","isLoading","getUsers","subscribe","users","length","dispatch","dataSource","console","log","paginator","sort","error","applyFilter","event","filterValue","target","value","filter","trim","toLowerCase","toggleEdit","user","editing","editingUser","Object","assign","save","uservalue","expandedElement","updateUsers","id","cancel","data","selectors","viewQuery","ctx","styles"],"sourceRoot":"","sources":["/Users/suneelkraguru/Downloads/interview-starter/src/app/_pages/users/users.component.ts","/Users/suneelkraguru/Downloads/interview-starter/src/app/_pages/users/users.component.html"],"sourcesContent":["import { Component, OnInit, ViewChild } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { UserService } from '@app/_shared/user.service';\nimport { MatTableDataSource, MatTableModule } from '@angular/material/table';\nimport { MatPaginator, MatPaginatorModule } from '@angular/material/paginator';\nimport { MatSort, MatSortModule } from '@angular/material/sort';\nimport {MatProgressBarModule} from '@angular/material/progress-bar';\nimport { User } from '@app/_state/users/users-store';\nimport { MatFormFieldModule } from '@angular/material/form-field';\nimport {MatIconModule} from '@angular/material/icon';\nimport { FormsModule } from '@angular/forms';\nimport { MatInputModule } from '@angular/material/input';\nimport { Store, select } from '@ngrx/store';\nimport { loadUsersSuccess } from '@app/_state/users/users.actions';\nimport { Observable } from 'rxjs';\nimport { getUserState } from '@app/_state/users/users.reducer';\n\n@Component({\n  selector: 'app-users',\n  standalone: true,\n  imports: [\n    CommonModule,\n    MatTableModule,\n    MatPaginatorModule,\n    MatSortModule,\n    MatProgressBarModule,\n    MatFormFieldModule,\n    MatInputModule,\n    MatIconModule,\n    FormsModule\n  ],\n  templateUrl: './users.component.html',\n  styleUrls: ['./users.component.scss']\n})\nexport class UsersComponent implements OnInit{\n\n  displayedColumns: string[] = ['id', 'firstName', 'lastName', 'email','actions'];\n  dataSource: MatTableDataSource<User>;\n  isLoading: boolean = true;\n  expandedUser: User | null; // keep track of expanded user for toggling\n  expandedElement:User | null;\n  @ViewChild(MatPaginator) paginator: MatPaginator;\n  @ViewChild(MatSort) sort: MatSort;\n  users$: Observable<import(\"/Users/suneelkraguru/Downloads/interview-starter/src/app/_state/users/users.reducer\").UserState>;\n  \n\n  constructor(private userService: UserService,private store: Store<User>) { \n    this.users$ = this.store.pipe(select(getUserState));\n  }\n\n  ngOnInit() {\n    this.loadUsers();\n  }\n\n  loadUsers() {\n    this.isLoading = true;\n    this.userService.getUsers().subscribe(users => {\n      if (users.users.length) { \n      this.store.dispatch(loadUsersSuccess({ users: users.users }));\n\n      this.dataSource = new MatTableDataSource(users.users);\n      console.log(users.users, 'fetch users');\n      this.dataSource.paginator = this.paginator;\n      this.dataSource.sort = this.sort;\n      this.isLoading = false;\n      }\n    }, error => {\n      console.error(error);\n      this.isLoading = false;\n    });\n  }\n\n  \n\n  applyFilter(event: Event) {\n    const filterValue = (event.target as HTMLInputElement).value;\n    this.dataSource.filter = filterValue.trim().toLowerCase();\n  }\n\n  toggleEdit(user: User) {\n   \n    user.editing = !user.editing;\n    if (user.editing) {\n      // Make a copy of the user to allow canceling changes\n      user.editingUser = Object.assign({}, user);\n    }\n  }\n\n  save(user: User) {\n    // Simulate saving changes to a data source\n    const uservalue = user;\n    this.expandedElement=null;\n    this.toggleEdit(user);\n    this.updateUsers(user.id,user)\n  }\n\n  cancel(user: User) {\n    this.expandedElement=null;\n    Object.assign(user, user.editingUser);\n    this.toggleEdit(user);\n  }\n  updateUsers(id:string,data:User){\n    this.userService.updateUsers(id,data).subscribe(data => {\n      console.log(data,'updated')\n    }, error => {\n      console.error(error);\n      this.isLoading = false;\n    });\n\n  }\n\n  \n\n}","<!-- <div class=\"table-container mat-elevation-z8\"> -->\n\n<!-- <mat-form-field>\n      <input matInput (keyup)=\"applyFilter($event)\" placeholder=\"Filter\">\n    </mat-form-field> -->\n\n<mat-progress-bar *ngIf=\"isLoading\" mode=\"indeterminate\"></mat-progress-bar>\n\n\n<div class=\"table-container mat-elevation-z8\">\n\n    <mat-form-field>\n        <input matInput (keyup)=\"applyFilter($event)\" placeholder=\"Filter\">\n    </mat-form-field>\n\n    <mat-progress-bar *ngIf=\"isLoading\" mode=\"indeterminate\"></mat-progress-bar>\n\n    <mat-table mat-table [dataSource]=\"dataSource\" matSort multiTemplateDataRows>\n\n        <!-- Table Header -->\n        <ng-container matColumnDef=\"id\">\n            <th mat-header-cell *matHeaderCellDef mat-sort-header>ID</th>\n            <td mat-cell *matCellDef=\"let user\">{{ user.id }}</td>\n        </ng-container>\n\n        <ng-container matColumnDef=\"firstName\">\n            <th mat-header-cell *matHeaderCellDef mat-sort-header>First Name</th>\n            <td mat-cell *matCellDef=\"let user\">{{ user.firstName }}</td>\n        </ng-container>\n\n        <ng-container matColumnDef=\"lastName\">\n            <th mat-header-cell *matHeaderCellDef mat-sort-header>Last Name</th>\n            <td mat-cell *matCellDef=\"let user\">{{ user.lastName }}</td>\n        </ng-container>\n\n        <ng-container matColumnDef=\"email\">\n            <th mat-header-cell *matHeaderCellDef mat-sort-header>Email</th>\n            <td mat-cell *matCellDef=\"let user\">{{ user.email }}</td>\n        </ng-container>\n\n        <ng-container matColumnDef=\"actions\">\n            <th mat-header-cell *matHeaderCellDef></th>\n            <td mat-cell *matCellDef=\"let user\">\n                <button mat-icon-button (click)=\"toggleEdit(user)\">\n                    <mat-icon>{{ user.editing ? 'done' : 'edit' }}</mat-icon>\n                </button>\n            </td>\n        </ng-container>\n        <!-- Expanded Content Column - The detail row is made up of this one column that spans across all columns -->\n        <ng-container matColumnDef=\"expandedDetail\">\n            <td [attr.colspan]=\"displayedColumns.length\" *matCellDef=\"let user\">\n                <div class=\"expanded-row-content\" *ngIf=\"expandedElement === user\">\n                    <div class=\"input-field\">\n                        <mat-form-field>\n                            <input matInput [(ngModel)]=\"user.firstName\" placeholder=\"First Name\">\n                        </mat-form-field>\n                    </div>\n                    <div class=\"input-field\">\n                        <mat-form-field>\n                            <input matInput [(ngModel)]=\"user.lastName\" placeholder=\"Last Name\">\n                        </mat-form-field>\n                    </div>\n                    <div class=\"input-field\">\n                        <mat-form-field>\n                            <input matInput [(ngModel)]=\"user.email\" placeholder=\"Email\">\n                        </mat-form-field>\n                    </div>\n                    <div class=\"actions\">\n                        <button mat-button color=\"primary\" (click)=\"save(user)\">Save</button>\n                        <button mat-button color=\"warn\" (click)=\"cancel(user)\">Cancel</button>\n                    </div>\n                </div>\n            </td>\n        </ng-container>\n\n        <!-- Table Rows -->\n        <tr mat-header-row *matHeaderRowDef=\"displayedColumns\"></tr>\n        <tr mat-row *matRowDef=\"let user; columns: displayedColumns;\" [class.expanded-row]=\"expandedElement === user\"\n            (click)=\"expandedElement = expandedElement === user ? null : user\">\n        </tr>\n\n        <!-- Expandable Rows -->\n        <tr mat-row *matRowDef=\"let user; columns: ['expandedDetail'];\" class=\"expanded-row-detail\">\n        </tr>\n    </mat-table>\n\n\n    <!-- <mat-paginator [pageSizeOptions]=\"[10, 25, 50]\" showFirstLastButtons></mat-paginator>-->\n\n</div>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}